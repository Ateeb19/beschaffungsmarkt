"use strict";(self.webpackChunkbeschaffungsmarkt=self.webpackChunkbeschaffungsmarkt||[]).push([[6087],{3891:(e,s,t)=>{t.d(s,{A:()=>i});t(5043);var a=t(8155),n=t(1458),l=t(579);const i=e=>{let{show:s,message:t,onConfirm:i,onCancel:r}=e;return(0,l.jsxs)(n.A,{show:s,onHide:r,centered:!0,backdropClassName:"custom-backdrop",children:[(0,l.jsx)(n.A.Header,{closeButton:!0,children:(0,l.jsx)(n.A.Title,{children:"Confirmation"})}),(0,l.jsx)(n.A.Body,{children:t}),(0,l.jsxs)(n.A.Footer,{children:[(0,l.jsx)(a.A,{variant:"secondary",onClick:r,children:"Cancel"}),(0,l.jsx)(a.A,{variant:"danger",onClick:i,children:"Yes, Delete"})]})]})}},6087:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(9379),n=t(5043),l=t(6720),i=t(7706),r=t(3891),c=t(184),d=t(3003),o=t(9981),m=t(502),u=t(8789),x=t(5394),h=t(2021),p=t(9722),g=t(9342),j=t(5015),f=t(7537),b=t(579);const v=e=>{let{accept:s,onFileDrop:t,label:l,className:i}=e;const r=(0,n.useCallback)(e=>{if(e.length>0){const s=e[0];t(s)}},[t]),{getRootProps:c,getInputProps:d,isDragActive:o}=(0,u.VB)({onDrop:r,accept:s,multiple:!1});return(0,b.jsx)("div",(0,a.A)((0,a.A)({},c()),{},{className:"d-flex flex-column align-items-center justify-content-center text-center ".concat(i),children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",(0,a.A)({},d())),(0,b.jsx)("p",{children:l})]})}))},y=()=>{const e="https://api.beschaffungsmarkt.com",s=(0,o.Zp)(),{showAlert:t}=(0,i.M)(),a=(0,d.wA)(),u=(0,o.zy)(),{data:y,requestStatus:N,error:w}=(0,d.d4)(e=>e.user);(0,n.useEffect)(()=>{a((0,m.me)())},[a,u]);const[C,A]=(0,n.useState)(!1),[k,S]=(0,n.useState)([]),[F,P]=(0,n.useState)(""),[T,I]=(0,n.useState)(!1),[_,E]=(0,n.useState)(null),[D,z]=(0,n.useState)(null),[L,q]=(0,n.useState)(0),[B,M]=(0,o.ok)(),O=parseInt(B.get("page"))||1,[Y,G]=(0,n.useState)(O),R=(Math.ceil(L/15),async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{const a=await p.A.post("".concat(e,"/api/products"),{currentPage:t,itemsPerPage:15},{withCredentials:!0}),n=a.data.totalDataCount||0;q(n);const l=Math.ceil(n/15)||1;if(t>l)return G(l),M({page:l}),void s("?page=".concat(l),{replace:!0});S(a.data.results||[])}catch(a){console.error("Error fetching user products:",a)}});(0,n.useEffect)(()=>{R(Y)},[Y]);const[W,Z]=(0,n.useState)(),[H,U]=(0,n.useState)(!1),V=e=>{A(!0),Z(e),P(e.title)},J=()=>{A(!1),Z(null),U(!1),P("")};console.log("product length-: ",k.length);const[K,Q]=(0,n.useState)(""),[X,$]=(0,n.useState)(!1),ee=e=>{Q(e),$(!0)},se=()=>{Q(null),$(!1)},te=async()=>{try{const a=await p.A.post("".concat(e,"/api/products/delete"),{productId:K._id},{withCredentials:!0});t(a.data.msg,"success"),s("/dashboard/company/product-management"),se(),R(Y)}catch(a){console.log(a)}};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-start w-100",children:[(0,b.jsxs)("div",{className:"d-flex flex-row align-items-between justify-content-between w-100",children:[(0,b.jsx)("h5",{style:{fontWeight:"700"},children:"Product"}),(0,b.jsxs)("button",{className:"add-product-button",onClick:()=>{if(0===y.is_premium)t((0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.FaExclamationTriangle,{className:"me-2 fs-2 text-warning"})," Please upgrade your membership to upload product"]}),"warning");else if(1===y.is_premium){if(k.length>=5)return void t((0,b.jsxs)("div",{className:"d-flex gap-1 justify-content-center align-items-center text-start me-3",children:[(0,b.jsx)(g.S3Z,{className:"text-warning",style:{fontSize:"90px"}}),(0,b.jsx)("span",{children:"You have reached your limit of 5 uploads. Please upgrade your membership for additional uploads."})]}),"warning");A(!0)}else if(2===y.is_premium){if(k.length>=20)return void t((0,b.jsxs)("div",{className:"d-flex gap-1 justify-content-center align-items-center text-start me-3",children:[(0,b.jsx)(g.S3Z,{className:"text-warning",style:{fontSize:"90px"}}),(0,b.jsx)("span",{children:"You have reached your limit of 20 uploads. Please upgrade your membership for additional uploads."})]}),"warning");A(!0)}},children:[(0,b.jsx)(l.jgn,{})," Add Product"]})]}),C&&(0,b.jsx)("div",{className:"popup-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,b.jsxs)("div",{className:"popup-box bg-white p-4 rounded shadow-lg position-relative",style:{width:"700px",maxWidth:"90%"},children:[(0,b.jsx)("button",{onClick:J,className:"btn  position-absolute",style:{top:"10px",right:"10px"},children:(0,b.jsx)(h.j55,{})}),(0,b.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-start",children:[(0,b.jsxs)("h4",{className:"mb-3",children:[W?(0,b.jsx)(b.Fragment,{children:"Edit"}):(0,b.jsx)(b.Fragment,{children:"Add"})," Product"]}),(0,b.jsxs)("div",{className:"d-flex flex-column align-items-start w-100 mb-3",children:[(0,b.jsxs)("label",{children:["Title ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)("input",{type:"text",placeholder:"Title",className:"form-control",value:F,onChange:e=>P(e.target.value)})]}),(0,b.jsxs)("div",{className:"d-flex flex-column w-100 align-items-start mb-3",children:[(0,b.jsxs)("label",{children:["Image ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsxs)("div",{className:"d-flex align-items-start gap-3 w-100 mt-2",children:[(0,b.jsx)(v,{accept:"image/*",name:"banner",onFileDrop:e=>{I(!0),E(e),z(URL.createObjectURL(e))},className:"image-div-das-image-upload-banner",label:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.LEk,{className:"fs-2 mb-3"})," ",(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"Click to upload"})," or drag and drop"]}),(0,b.jsx)("p",{style:{fontSize:"12px"},children:"SVG, PNG, JPG or WEBP"})]})}),D?(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-end image-div-das-image-baner-outer-div",children:[(0,b.jsx)("div",{className:"px-4 py-3 image-div-das-image-baner-inner-div",children:(0,b.jsx)("img",{src:T?D:"".concat(e,"/files/").concat(D),alt:"Selected Image",className:"image-div-das-image-banner"})}),(0,b.jsx)(h.j55,{style:{cursor:"pointer",fontSize:"20px"},onClick:()=>{E(""),z(""),I(!0)}})]}):(0,b.jsx)(b.Fragment,{children:W&&(0,b.jsx)(b.Fragment,{children:!H&&(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-end image-div-das-image-baner-outer-div",children:[(0,b.jsx)("div",{className:"px-4 py-3 image-div-das-image-baner-inner-div",children:(0,b.jsx)("img",{src:W?"".concat(e,"/files/").concat(W.image):D,alt:"Selected",className:"image-div-das-image-banner"})}),(0,b.jsx)(h.j55,{style:{cursor:"pointer",fontSize:"20px"},onClick:()=>{E(""),z(""),I(!0),U(!0)}})]})})})]})]}),(0,b.jsxs)("div",{className:"d-flex flex-row justify-content-end w-100 mt-3 gap-2",children:[(0,b.jsx)("button",{className:"das-button-end save-button",onClick:W?async()=>{const a=new FormData;a.append("productId",W._id),a.append("title",F),T&&_&&a.append("image",_);try{const n=await p.A.post("".concat(e,"/api/products/edit"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t(n.data.msg,"success"),s("/dashboard/company/product-management"),R(Y),P(""),E(""),z(""),J()}catch(n){console.log(n)}}:async()=>{if(!F&&!_)return void t("Product Title and Image is required","warning");if(!F)return void t("Product Title is required","warning");if(!_)return void t("Product Image is required","warning");if(k.length>=5)return void t("You have reached your limit of 5 uploads. Please upgrade your membership for additional uploads","warning");const a=new FormData;a.append("title",F),T&&(_?a.append("image",_):a.append("image","false"));try{const n=await p.A.post("".concat(e,"/api/products/add"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});t(n.data.msg,"success"),s("/dashboard/company/product-management"),R(Y),P(""),E(""),z(""),J()}catch(n){console.log(n)}},children:W?(0,b.jsx)(b.Fragment,{children:"Edit"}):(0,b.jsx)(b.Fragment,{children:"Add"})}),(0,b.jsx)("button",{className:"das-button-end cancel-button",onClick:J,children:"Cancel"})]})]})]})}),(0,b.jsxs)("div",{className:"d-none d-md-flex flex-column w-100 align-items-start justify-content-start text-start das-general-form mt-2",children:[(0,b.jsx)("h6",{children:"Product Table"}),(0,b.jsxs)("table",{class:"table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col fs-6",children:"NO"}),(0,b.jsx)("th",{scope:"col fs-6",children:"TITLE"}),(0,b.jsx)("th",{scope:"col fs-6",children:"ACTION"})]})}),(0,b.jsx)("tbody",{children:k.length>=0&&(0,b.jsx)(b.Fragment,{children:k.map((e,s)=>(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:s+1}),(0,b.jsx)("td",{children:e.title}),(0,b.jsxs)("td",{children:[(0,b.jsxs)("div",{className:"d-flex gap-3",children:[(0,b.jsx)("button",{className:"btn product_edit_btn",onClick:()=>V(e),children:"Edit"}),(0,b.jsx)("button",{className:"btn product_delete_btn",onClick:()=>ee(e),children:"Delete"})]}),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(r.A,{show:X,message:"Are you sure you want to delete this product?",onConfirm:te,onCancel:se})})]})]})}))})})]}),L>0&&(0,b.jsx)("div",{className:"d-flex justify-content-center mt-4 w-100",children:(0,b.jsx)(f.A,{spacing:2,children:(0,b.jsx)(j.A,{count:Math.ceil(L/15),page:Y,onChange:(e,s)=>{G(s),M({page:s}),R(s)},color:"primary",shape:"rounded"})})})]}),(0,b.jsx)("div",{className:"d-flex flex-column w-100 align-items-start justify-content-start text-start das-general-form mt-4 d-md-none",children:k.length>=0&&(0,b.jsx)(b.Fragment,{children:k.map((e,s)=>(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"das-mobile-card border border-gray-300 rounded-2 p-3 mb-3 w-100",children:[(0,b.jsxs)("div",{className:"d-flex flex-row mb-2 gap-2",children:[(0,b.jsx)("span",{className:"das-mobile-card-label",children:"NO :"}),(0,b.jsx)("span",{className:"fw-bold",children:s+1})]}),(0,b.jsxs)("div",{className:"d-flex flex-row mb-2",children:[(0,b.jsx)("span",{className:"das-mobile-card-label",children:"TITLE : "}),(0,b.jsx)("span",{className:"fw-bold",children:e.title})]}),(0,b.jsxs)("div",{className:"d-flex flex-column",children:[(0,b.jsxs)("div",{className:"d-flex gap-3 mt-1",children:[(0,b.jsx)("button",{className:"btn product_edit_btn",onClick:()=>V(e),children:"Edit"}),(0,b.jsx)("button",{className:"btn product_delete_btn",onClick:()=>ee(e),children:"Delete"})]}),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(r.A,{show:X,message:"Are you sure you want to delete this product?",onConfirm:te,onCancel:se})})]})]},s)}))})})]})})}}}]);
//# sourceMappingURL=6087.1a30cf42.chunk.js.map