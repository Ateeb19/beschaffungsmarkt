"use strict";(self.webpackChunkbeschaffungsmarkt=self.webpackChunkbeschaffungsmarkt||[]).push([[5686],{3891:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);var a=s(8155),n=s(1458),i=s(579);const l=e=>{let{show:t,message:s,onConfirm:l,onCancel:c}=e;return(0,i.jsxs)(n.A,{show:t,onHide:c,centered:!0,backdropClassName:"custom-backdrop",children:[(0,i.jsx)(n.A.Header,{closeButton:!0,children:(0,i.jsx)(n.A.Title,{children:"Confirmation"})}),(0,i.jsx)(n.A.Body,{children:s}),(0,i.jsxs)(n.A.Footer,{children:[(0,i.jsx)(a.A,{variant:"secondary",onClick:c,children:"Cancel"}),(0,i.jsx)(a.A,{variant:"danger",onClick:l,children:"Yes, Delete"})]})]})}},5686:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(9379),n=s(5043),i=s(6720),l=s(7706),c=s(3891),r=s(184),d=s(3003),o=s(9981),m=s(502),x=s(8789),h=s(5394),p=s(2021),u=s(9722),g=s(9342),f=s(5015),j=s(7537),b=s(579);const v=e=>{let{accept:t,onFileDrop:s,label:i,className:l}=e;const c=(0,n.useCallback)(e=>{if(e.length>0){const t=e[0];s(t)}},[s]),{getRootProps:r,getInputProps:d,isDragActive:o}=(0,x.VB)({onDrop:c,accept:t,multiple:!1});return(0,b.jsx)("div",(0,a.A)((0,a.A)({},r()),{},{className:"d-flex flex-column align-items-center justify-content-center text-center ".concat(l),children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",(0,a.A)({},d())),(0,b.jsx)("p",{children:i})]})}))},y=()=>{const e="https://api.beschaffungsmarkt.com",t=(0,o.Zp)(),{showAlert:s}=(0,l.M)(),a=(0,d.wA)(),x=(0,o.zy)(),{data:y,requestStatus:N,error:w}=(0,d.d4)(e=>e.user);(0,n.useEffect)(()=>{a((0,m.me)())},[a,x]);const[C,A]=(0,n.useState)(!1),[k,S]=(0,n.useState)([]),[F,_]=(0,n.useState)(""),[E,P]=(0,n.useState)(!1),[T,I]=(0,n.useState)(null),[D,z]=(0,n.useState)(null),[L,B]=(0,n.useState)(0),[M,O]=(0,o.ok)(),Y=parseInt(M.get("page"))||1,[G,R]=(0,n.useState)(Y),W=(Math.ceil(L/15),async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{const a=await u.A.post("".concat(e,"/api/certificates"),{currentPage:s,itemsPerPage:15},{withCredentials:!0});console.log(a.data);const n=a.data.totalDataCount||0;B(n);const i=Math.ceil(n/15)||1;if(s>i)return R(i),O({page:i}),void t("?page=".concat(i),{replace:!0});S(a.data.results||[])}catch(a){console.error("Error fetching user products:",a)}});(0,n.useEffect)(()=>{W(G)},[G]);const[Z,H]=(0,n.useState)(),[U,V]=(0,n.useState)(!1),q=e=>{A(!0),H(e),_(e.title)},J=()=>{A(!1),H(null),V(!1),_("")},[K,Q]=(0,n.useState)(""),[X,$]=(0,n.useState)(!1),ee=e=>{Q(e),$(!0)},te=()=>{Q(null),$(!1)},se=async()=>{try{const a=await u.A.post("".concat(e,"/api/certificates/delete"),{certificateId:K._id},{withCredentials:!0});s(a.data.msg,"success"),t("/dashboard/company/certificates"),te(),W(G)}catch(a){console.log(a)}};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-start w-100",children:[(0,b.jsxs)("div",{className:"d-flex flex-row align-items-between justify-content-between w-100",children:[(0,b.jsx)("h5",{style:{fontWeight:"700"},children:"Certificate"}),(0,b.jsxs)("button",{className:"add-product-button",onClick:()=>{if(0===y.is_premium)s((0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.FaExclamationTriangle,{className:"me-2 fs-2 text-warning"})," Please upgrade your membership to upload certificates."]}),"warning");else if(1===y.is_premium){if(k.length>=5)return void s((0,b.jsxs)("div",{className:"d-flex gap-1 justify-content-center align-items-center text-start me-3",children:[(0,b.jsx)(g.S3Z,{className:"text-warning",style:{fontSize:"90px"}}),(0,b.jsx)("span",{children:"You have reached your limit of 5 uploads. Please upgrade your membership for additional uploads."})]}),"warning");A(!0)}else if(2===y.is_premium){if(k.length>=20)return void s((0,b.jsxs)("div",{className:"d-flex gap-1 justify-content-center align-items-center text-start me-3",children:[(0,b.jsx)(g.S3Z,{className:"text-warning",style:{fontSize:"90px"}}),(0,b.jsx)("span",{children:"You have reached your limit of 20 uploads. Please upgrade your membership for additional uploads."})]}),"warning");A(!0)}},children:[(0,b.jsx)(i.jgn,{})," Add Certificate"]})]}),C&&(0,b.jsx)("div",{className:"popup-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,b.jsxs)("div",{className:"popup-box bg-white p-4 rounded shadow-lg position-relative",style:{width:"700px",maxWidth:"90%"},children:[(0,b.jsx)("button",{onClick:J,className:"btn  position-absolute",style:{top:"10px",right:"10px"},children:(0,b.jsx)(p.j55,{})}),(0,b.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-start",children:[(0,b.jsxs)("h4",{className:"mb-3",children:[Z?(0,b.jsx)(b.Fragment,{children:"Edit"}):(0,b.jsx)(b.Fragment,{children:"Add"})," Certificate"]}),(0,b.jsxs)("div",{className:"d-flex flex-column align-items-start w-100 mb-3",children:[(0,b.jsxs)("label",{children:["Title ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)("input",{type:"text",placeholder:"Title",className:"form-control",value:F,onChange:e=>_(e.target.value)})]}),(0,b.jsxs)("div",{className:"d-flex flex-column w-100 align-items-start mb-3",children:[(0,b.jsxs)("label",{children:["Image ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsxs)("div",{className:"d-flex align-items-start gap-3 w-100 mt-2",children:[(0,b.jsx)(v,{accept:"image/*",name:"banner",onFileDrop:e=>{P(!0),I(e),z(URL.createObjectURL(e))},className:"image-div-das-image-upload-banner",label:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.LEk,{className:"fs-2 mb-3"})," ",(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"Click to upload"})," or drag and drop"]}),(0,b.jsx)("p",{style:{fontSize:"12px"},children:"SVG, PNG, JPG or WEBP"})]})}),D?(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-end image-div-das-image-baner-outer-div",children:[(0,b.jsx)("div",{className:"px-4 py-3 image-div-das-image-baner-inner-div",children:(0,b.jsx)("img",{src:E?D:"".concat(e,"/files/").concat(D),alt:"Selected Image",className:"image-div-das-image-banner"})}),(0,b.jsx)(p.j55,{style:{cursor:"pointer",fontSize:"20px"},onClick:()=>{I(""),z(""),P(!0)}})]}):(0,b.jsx)(b.Fragment,{children:Z&&(0,b.jsx)(b.Fragment,{children:!U&&(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-end image-div-das-image-baner-outer-div",children:[(0,b.jsx)("div",{className:"px-4 py-3 image-div-das-image-baner-inner-div",children:(0,b.jsx)("img",{src:Z?"".concat(e,"/files/").concat(Z.image):D,alt:"Selected",className:"image-div-das-image-banner"})}),(0,b.jsx)(p.j55,{style:{cursor:"pointer",fontSize:"20px"},onClick:()=>{I(""),z(""),P(!0),V(!0)}})]})})})]})]}),(0,b.jsxs)("div",{className:"d-flex flex-row justify-content-end w-100 mt-3 gap-2",children:[(0,b.jsx)("button",{className:"das-button-end save-button",onClick:Z?async()=>{if(!F||!T)return void s("Select an image to update","warning");const a=new FormData;a.append("certificateId",Z._id),a.append("title",F),E&&(T?a.append("image",T):a.append("image","false"));try{const n=await u.A.post("".concat(e,"/api/certificates/edit"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});s(n.data.msg,"success"),t("/dashboard/company/certificates"),console.log("submit response",n.data),J(),W(G),I(""),z("")}catch(n){console.log(n)}}:async()=>{if(!F||!T)return;if(k.length>=5)return void s("You have reached your limit of 5 uploads. Please upgrade your membership for additional uploads.","warning");const a=new FormData;a.append("title",F),E&&(T?a.append("image",T):a.append("image","false"));try{const n=await u.A.post("".concat(e,"/api/certificates/add"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});s(n.data.msg,"success"),t("/dashboard/company/certificates"),J(),W(G),I(""),z("")}catch(n){console.log(n)}},children:Z?(0,b.jsx)(b.Fragment,{children:"Edit"}):(0,b.jsx)(b.Fragment,{children:"Add"})}),(0,b.jsx)("button",{className:"das-button-end cancel-button",onClick:J,children:"Cancel"})]})]})]})}),(0,b.jsxs)("div",{className:"d-none d-md-flex flex-column w-100 align-items-start justify-content-start text-start das-general-form mt-2",children:[(0,b.jsx)("h6",{children:"Certificate Table"}),(0,b.jsxs)("table",{class:"table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col fs-6",children:"NO"}),(0,b.jsx)("th",{scope:"col fs-6",children:"TITLE"}),(0,b.jsx)("th",{scope:"col fs-6",children:"ACTION"})]})}),(0,b.jsx)("tbody",{children:k.length>=0&&(0,b.jsx)(b.Fragment,{children:k.map((e,t)=>(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:t+1}),(0,b.jsx)("td",{children:e.title}),(0,b.jsxs)("td",{children:[(0,b.jsxs)("div",{className:"d-flex gap-3",children:[(0,b.jsx)("button",{className:"btn product_edit_btn",onClick:()=>q(e),children:"Edit"}),(0,b.jsx)("button",{className:"btn product_delete_btn",onClick:()=>ee(e),children:"Delete"})]}),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(c.A,{show:X,message:"Are you sure you want to delete this Certificate?",onConfirm:se,onCancel:te})})]})]})}))})})]}),L>0&&(0,b.jsx)("div",{className:"d-flex justify-content-center mt-4 w-100",children:(0,b.jsx)(j.A,{spacing:2,children:(0,b.jsx)(f.A,{count:Math.ceil(L/15),page:G,onChange:(e,t)=>{R(t),O({page:t}),W(t)},color:"primary",shape:"rounded"})})})]}),(0,b.jsx)("div",{className:"d-flex flex-column w-100 align-items-start justify-content-start text-start das-general-form mt-4 d-md-none",children:k.length>=0&&(0,b.jsx)(b.Fragment,{children:k.map((e,t)=>(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"das-mobile-card border border-gray-300 rounded-2 p-3 mb-3 w-100",children:[(0,b.jsxs)("div",{className:"d-flex flex-row mb-2 gap-2",children:[(0,b.jsx)("span",{className:"das-mobile-card-label",children:"NO :"}),(0,b.jsx)("span",{className:"fw-bold",children:t+1})]}),(0,b.jsxs)("div",{className:"d-flex flex-row mb-2 gap-2",children:[(0,b.jsx)("span",{className:"das-mobile-card-label",children:"TITLE :"}),(0,b.jsx)("span",{className:"fw-bold",children:e.title})]}),(0,b.jsxs)("div",{className:"d-flex gap-3 mt-2",children:[(0,b.jsx)("button",{className:"btn product_edit_btn",onClick:()=>q(e),children:"Edit"}),(0,b.jsx)("button",{className:"btn product_delete_btn",onClick:()=>ee(e),children:"Delete"})]}),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(c.A,{show:X,message:"Are you sure you want to delete this Certificate?",onConfirm:se,onCancel:te})})]},t)}))})})]})})}}}]);
//# sourceMappingURL=5686.f796184c.chunk.js.map