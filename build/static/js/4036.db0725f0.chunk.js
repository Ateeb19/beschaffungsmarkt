"use strict";(self.webpackChunkbeschaffungsmarkt=self.webpackChunkbeschaffungsmarkt||[]).push([[4036],{4036:(e,a,s)=>{s.r(a),s.d(a,{default:()=>S});var t=s(9379),l=s(9722),n=s(5043),c=s(8789),i=s(5394),r=s(2021),o=s(7204),d=s(2639),m=s(184),u=s(3156),p=s(3825),x=s(3002),g=s(1355),y=s(2620),b=s(7962),f=s(3003),h=s(7706),j=s(9981),v=s(502),N=s(579);const w=e=>{let{accept:a,onFileDrop:s,label:l,className:i}=e;const r=(0,n.useCallback)(e=>{if(e.length>0){const a=e[0];s(a)}},[s]),{getRootProps:o,getInputProps:d,isDragActive:m}=(0,c.VB)({onDrop:r,accept:a,multiple:!1});return(0,N.jsx)("div",(0,t.A)((0,t.A)({},o()),{},{className:"d-flex flex-column align-items-center justify-content-center text-center ".concat(i),children:(0,N.jsxs)("div",{children:[(0,N.jsx)("input",(0,t.A)({},d())),(0,N.jsx)("p",{children:l})]})}))},S=()=>{const e="https://api.beschaffungsmarkt.com",a=(0,j.Zp)(),[s,t]=(0,n.useState)(!1),[c,S]=(0,n.useState)(!1),[_,C]=(localStorage.getItem("procurement_token").replace("Bearer ","").trim(),(0,n.useState)(null)),[k,D]=(0,n.useState)(null),{showAlert:A}=(0,h.M)(),F=(0,f.wA)(),R=(0,j.zy)(),{data:P,requestStatus:I,error:L}=(0,f.d4)(e=>e.user);(0,n.useEffect)(()=>{F((0,v.me)())},[F,R]),console.log("user data -: ",P),console.log("user data requestStatus-: ",I),console.log("user data error-: ",L);const z=null===P||void 0===P?void 0:P.is_premium,[T,E]=(0,n.useState)(null),[G,V]=(0,n.useState)(null),[B,K]=(0,n.useState)(""),[W,Y]=(0,n.useState)([]),[J,O]=(0,n.useState)([]),[U,q]=(0,n.useState)([]),[H,M]=(0,n.useState)([]),[Z,X]=(0,n.useState)([]),[$,Q]=(0,n.useState)(!1),[ee,ae]=(0,n.useState)(""),se=e=>{if(!e)return null;const[a,s]=e.split("."),t={GiIcons:d,FaIcons:m,Fa6Icons:u,AiIcons:p,PiIcons:x,SiIcons:g,GrIcons:y}[a];return t?t[s]:null};(0,n.useEffect)(()=>{(async()=>{try{const a=await l.A.get("".concat(e,"/api/users/get-company-types"));K(a.data)}catch(a){console.log(a)}})(),(async()=>{try{const a=await l.A.get("".concat(e,"/api/users/get-company-segments"));Y(a.data)}catch(a){console.log(a)}})(),(async()=>{try{const a=await l.A.get("".concat(e,"/api/users/get-company-main-categories"));O(a.data)}catch(a){console.log(a)}})(),(async()=>{try{const a=await l.A.get("".concat(e,"/api/users/get-company-sub-categories"));q(a.data)}catch(a){console.log(a)}})()},[]);const[te,le]=(0,n.useState)(null),[ne,ce]=(0,n.useState)(null),[ie,re]=(0,n.useState)([]),[oe,de]=(0,n.useState)([]),[me,ue]=(0,n.useState)([]),[pe,xe]=(0,n.useState)([]),[ge,ye]=(0,n.useState)([]),be=1===z||2===z?5:1,[fe,he]=(0,n.useState)({value:"",label:""}),[je,ve]=(0,n.useState)({value:"",label:""}),[Ne,we]=(0,n.useState)(null),[Se,_e]=(0,n.useState)(null),[Ce,ke]=(0,n.useState)(null),[De,Ae]=(0,n.useState)(null),[Fe,Re]=(0,n.useState)(null),[Pe,Ie]=(0,n.useState)(null),[Le,ze]=(0,n.useState)(null),[Te,Ee]=(0,n.useState)(null),[Ge,Ve]=(0,n.useState)([]),[Be,Ke]=(0,n.useState)(""),[We,Ye]=(0,n.useState)([]),[Je,Oe]=(0,n.useState)("");(0,n.useEffect)(()=>{X(me?U.filter(e=>e.main_category===me._id):[])},[me,U]);const Ue=W.map(e=>({_id:e._id,label:e.label,value:e._id})).filter(e=>!oe.some(a=>a.segment&&a.segment._id===e._id));(0,n.useEffect)(()=>{if(P){if(P.company_logo?(C(P.company_logo||""),D(P.company_logo||""),t(!1)):(C(""),D("")),P.company_banner&&(E(P.company_banner||""),V(P.company_banner||""),S(!1)),V(P.company_banner||""),le(P.company_name||""),ce(P.company_description||""),P&&B.length>0){const e=B.find(e=>e._id===P.company_type)||null;re(e)}P&&P.company_segment&&de(P.company_segment);const e=P.company_category.map(e=>{const a=J.find(a=>a._id===e.category.main_category);return a?{main:{_id:a._id,label:a.label,value:a.value,icon:a.icon},sub:{_id:e.category._id,label:e.category.label,value:e.category.value,icon:e.category.icon}}:{main:{},sub:{_id:e.category._id,label:e.category.label,value:e.category.value,icon:e.category.icon}}});ye(e),he({value:P.country,label:P.country}||""),ve({value:P.city,label:P.city}||""),we(P.street||""),_e(P.zipcode||""),ke(P.taxpayer_id||""),Ae(P.fax_number||""),Re(P.website||""),Ie(P.hscode||""),ze(P.founded_year||""),Ee(P.employee_number||""),Ve(P.keyword||[]),P.keyword&&Ye(P.keyword)}},[P,B]);const[qe,He]=(0,n.useState)({});return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-start w-100",children:[(0,N.jsx)("h5",{style:{fontWeight:"700"},children:"General Settings"}),(0,N.jsxs)("div",{className:"d-flex flex-column w-100 align-items-start justify-content-start text-start das-general-form mt-2",children:[(0,N.jsxs)("div",{className:"d-flex flex-column flex-md-row w-100 align-items-start justify-content-start text-start mb-4 ",children:[(0,N.jsx)("div",{className:"col-12 col-md-6 d-flex flex-column align-items-start justify-content-center",children:(0,N.jsx)("div",{className:"image-div-das-general-form d-flex flex-column align-items-center justify-content-center w-100",children:k?(0,N.jsxs)("div",{className:"d-flex flex-row align-item-end justify-content-end",children:[(0,N.jsx)("img",{src:s?k:"".concat(e,"/files/").concat(_),alt:"Selected",className:"rounded-circle border border-1 border-dark image-div-das-image"}),(0,N.jsx)(r.j55,{style:{cursor:"pointer",fontSize:"20px"},onClick:()=>{C(""),D(""),t(!0)}})]}):(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(w,{accept:"image/*",onFileDrop:e=>{t(!0),C(e),D(URL.createObjectURL(e))},className:"image-div-das-image-upload",label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.LEk,{className:"fs-2 mb-3"})," ",(0,N.jsxs)("p",{children:[(0,N.jsx)("b",{children:"Click to upload"})," or drag and drop"]})," ",(0,N.jsx)("p",{style:{fontSize:"12px"},children:" SVG, PNG, JPG or WEBP"})]})})})})}),(0,N.jsxs)("div",{className:"col-12 col-md-6 mt-3 mt-md-0 d-flex flex-column align-items-start justify-content-center",children:[(0,N.jsxs)("label",{for:"company_name",children:["Company Name ",(0,N.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,N.jsx)("input",{type:"text",className:"form-control ".concat(qe.companyName?"border-danger":""),name:"companyName",id:"company_name","aria-describedby":"company_name",placeholder:"Company Name",value:te,onChange:e=>le(e.target.value)}),qe.companyName&&(0,N.jsx)("small",{className:"text-danger",children:qe.companyName}),(0,N.jsxs)("label",{for:"company_description",className:"d-flex justify-content-between w-100 mt-4",children:[(0,N.jsx)("span",{children:"Company Description"}),(0,N.jsxs)("span",{className:"flag-icons",children:[(0,N.jsx)("img",{src:"https://flagcdn.com/us.svg",alt:"US"}),(0,N.jsx)("img",{src:"https://flagcdn.com/tr.svg",alt:"TR"}),(0,N.jsx)("img",{src:"https://flagcdn.com/de.svg",alt:"DE"})]})]}),(0,N.jsx)("textarea",{className:"form-control",placeholder:"Company Description",value:ne,onChange:e=>ce(e.target.value),rows:"5",cols:"50"})]})]}),(0,N.jsxs)("div",{className:"d-flex flex-column flex-md-row w-100 align-items-start justify-content-start text-start",children:[(0,N.jsx)("div",{className:"col-12 col-md-6 d-flex flex-column align-items-start justify-content-center pe-4",children:(0,N.jsxs)("div",{className:"image-div-das-general-form d-flex flex-column align-items-start justify-content-start text-start w-100 gap-3",children:[(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"c_type",className:"mb-2",children:"Company Type"}),(0,N.jsx)(o.Ay,{className:"basic-single",classNamePrefix:"select",placeholder:"Select Company Type",defaultValue:!1,isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:"country",options:B,onChange:e=>re(e),value:ie})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"c_segment",className:"mb-2",children:"Company Segment"}),(0,N.jsx)(o.Ay,{className:"basic-single",classNamePrefix:"select",placeholder:"Select Company Segment",defaultValue:!1,isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:"country",options:Ue,onChange:e=>{if(e){const a=W.find(a=>a._id===e._id);de([...oe,{_id:a._id,segment:{_id:a._id,value:a.value,label:a.label}}])}},value:null}),oe.length>0&&(0,N.jsx)("div",{className:"general-segment-div d-flex mt-3 gap-3",children:oe.map(e=>(0,N.jsxs)("div",{className:"general-segment-inner-div d-flex align-items-start justify-content-start",children:[e.segment?e.segment.label:"No Label",(0,N.jsx)("button",{type:"button",className:"btn-close btn-close-sm ms-2","aria-label":"Remove",onClick:()=>{return a=e._id,void de(oe.filter(e=>e._id!==a));var a}})]},e._id))})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"main_category",className:"mb-2",children:"Main Category"}),(0,N.jsx)(o.Ay,{className:"basic-single",classNamePrefix:"select",placeholder:"Select Main Category",defaultValue:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:"country",options:J,onChange:e=>{ue(e),xe(null)},value:me,isDisabled:$})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"main_category",className:"mb-2",children:"Sub Category"}),(0,N.jsx)(o.Ay,{className:"basic-single",classNamePrefix:"select",placeholder:"Select Sub Category",defaultValue:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:"country",options:Z,onChange:e=>{xe(e),me&&e&&(ye(a=>[...a,{main:me,sub:e}]),ue(null),xe(null),ge.length+1>=be&&Q(!0))},value:pe,isDisabled:$||!me}),ge.length>0&&(0,N.jsx)("div",{className:"mt-3 d-flex flex-wrap gap-2 ",children:ge.map((e,a)=>(0,N.jsxs)("div",{className:"position-relative border general-category-selected px-3 py-2 d-inline-flex align-items-center ",style:{flex:"0 0 auto"},children:[(0,N.jsx)("button",{type:"button",className:"btn-close position-absolute top-0 end-0 me-1 mt-1","aria-label":"Remove",onClick:()=>{return e=a,ye(a=>a.filter((a,s)=>s!==e)),void Q(!1);var e}}),(0,N.jsxs)("div",{className:"d-flex flex-column",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center gap-1 text-sm",children:[(()=>{const a=se(e.main.icon);return a&&(0,N.jsx)(a,{size:18})})(),(0,N.jsx)("span",{className:"fw-semibold",children:e.main.label})]}),(0,N.jsxs)("div",{className:"d-flex align-items-center gap-1 ps-3 small",children:[(0,N.jsx)(b.$7X,{}),(()=>{const a=se(e.sub.icon);return a&&(0,N.jsx)(a,{size:14})})(),(0,N.jsx)("span",{children:e.sub.label})]})]})]},a))})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsxs)("label",{for:"website",className:"",children:["Country ",(0,N.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,N.jsx)(o.Ay,{className:"basic-single ".concat(qe.country?"general-country-border":""),placeholder:"Select Country",classNamePrefix:"select",defaultValue:"",isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:"country",value:fe,options:[{value:"Germany",label:"Germany"},{value:"Turkey",label:"Turkey"}],onChange:e=>he(e)}),qe.country&&(0,N.jsx)("small",{className:"text-danger",children:qe.country})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsxs)("label",{for:"website",className:"mt-2",children:["City ",(0,N.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,N.jsx)(o.Ay,{className:"basic-single ".concat(qe.city?"border-danger":""),placeholder:"Select City",classNamePrefix:"select",isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:"city",value:je,options:H,onInputChange:(a,s)=>{let{action:t}=s;"input-change"===t&&(ae(a),(async a=>{console.log("this is the key - :",a),console.log("this is Country - :",fe);try{const s=await l.A.post("".concat(e,"/api/users/get-cities"),{cityKeyword:a,countryName:fe.value});M(s.data)}catch(s){console.log(s)}})(a))},onChange:e=>ve(e)}),qe.city&&(0,N.jsx)("small",{className:"text-danger",children:qe.city})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsxs)("label",{for:"website",children:["Street & Street Nr ",(0,N.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,N.jsx)("input",{type:"text",name:"street",class:"form-control ".concat(qe.street?"border-danger":""),id:"website","aria-describedby":"website",value:Ne,onChange:e=>we(e.target.value),placeholder:"Street & Street Nr"}),qe.street&&(0,N.jsx)("small",{className:"text-danger",children:qe.street})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsxs)("label",{for:"website",children:["Zip code ",(0,N.jsx)("span",{style:{color:"#dc2626"},children:"*"})]}),(0,N.jsx)("input",{type:"text",name:"zipcode",class:"form-control ".concat(qe.zipcode?"border-danger":""),id:"website","aria-describedby":"website",value:Se,onChange:e=>_e(e.target.value),placeholder:"Zip code"}),qe.zipcode&&(0,N.jsx)("small",{className:"text-danger",children:qe.zipcode})]})]})}),(0,N.jsxs)("div",{className:"col-12 col-md-6 mt-3 mt-md-0 d-flex flex-column align-items-start justify-content-center gap-3",children:[(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"Taxpayer ID "}),(0,N.jsx)("input",{type:"text",class:"form-control",id:"TaxpayerID","aria-describedby":"website",value:Ce,onChange:e=>ke(e.target.value),placeholder:"Taxpayer ID"})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"Fax Number"}),(0,N.jsx)("input",{type:"text",class:"form-control",id:"FaxNumber","aria-describedby":"FaxNumber",value:De,onChange:e=>Ae(e.target.value),placeholder:"Fax Number"})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"Website "}),(0,N.jsx)("input",{type:"text",class:"form-control",id:"Website","aria-describedby":"website",value:Fe,onChange:e=>Re(e.target.value),placeholder:"Website"})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"HS Code"}),(0,N.jsx)("input",{type:"text",class:"form-control",id:"HS Code","aria-describedby":"website",value:Pe,onChange:e=>Ie(e.target.value),placeholder:"HS Code"})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"Founded Year "}),(0,N.jsx)("input",{type:"text",class:"form-control",id:"Founded Year","aria-describedby":"website",value:Le,onKeyDown:e=>{/[0-9]/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()},onChange:e=>ze(e.target.value),placeholder:"Founded Year"})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"Number of Employees"}),(0,N.jsx)("input",{type:"text",class:"form-control",id:"website","aria-describedby":"website",value:Te,onKeyDown:e=>{/[0-9]/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Tab"===e.key||e.preventDefault()},onChange:e=>Ee(e.target.value),placeholder:"Number of Employees"})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)("label",{for:"website",children:"Keyword"}),(0,N.jsxs)("div",{className:"d-flex align-items-between justify-content-between w-100 gap-3",children:[(0,N.jsx)("input",{type:"text",className:"form-control ".concat(Je?"border-danger":""),id:"website","aria-describedby":"website",placeholder:"Keyword",value:Be,onChange:e=>Ke(e.target.value)}),(0,N.jsx)("button",{className:"das-control-key-add",type:"button",onClick:()=>{if(Oe(""),!Be.trim())return void Oe("Keyword is required.");if(0===z)return void Oe("You cannot add keyword. Please upgrade user's membership.");const e=1===z?50:100;We.length>=e?Oe("You can add up to ".concat(e," keywords only.")):We.includes(Be.trim())?Oe("This keyword is already added."):(Ye([...We,Be.trim()]),Ke(""))},children:"Add"})]}),Je&&(0,N.jsx)("span",{className:"text-danger d-block",style:{fontSize:"14px"},children:(0,N.jsx)("i",{children:Je})}),We.length>0&&(0,N.jsx)("div",{className:"mt-3 d-flex flex-wrap gap-2",children:We.map((e,a)=>(0,N.jsxs)("div",{className:"position-relative border general-category-selected px-3 py-2 d-inline-flex align-items-center ",style:{flex:"0 0 auto"},children:[(0,N.jsx)("button",{type:"button",className:"btn-close position-absolute top-0 end-0 me-1 mt-1","aria-label":"Remove",onClick:()=>(e=>{const a=[...We];a.splice(e,1),Ye(a)})(a)}),(0,N.jsx)("span",{className:"me-2",children:e})]},a))})]})]})]}),(0,N.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-start mt-3 w-100",children:[(0,N.jsx)("label",{for:"website",children:"Company Banner (Image or Video)"}),(0,N.jsxs)("div",{className:"d-flex align-items-start justify-content-start gap-3 w-100 mt-3",children:[(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(w,{accept:"image/*",name:"banner",onFileDrop:e=>{S(!0),E(e),V(URL.createObjectURL(e))},className:"image-div-das-image-upload-banner",label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.LEk,{className:"fs-2 mb-3"})," ",(0,N.jsxs)("p",{children:[(0,N.jsx)("b",{children:"Click to upload"})," or drag and drop"]})," ",(0,N.jsx)("p",{style:{fontSize:"12px"},children:" SVG, PNG, JPG or WEBP"})]})})}),G&&(0,N.jsxs)("div",{className:"d-flex align-items-start justify-content-end image-div-das-image-baner-outer-div ",children:[(0,N.jsx)("div",{className:"px-5 py-4 image-div-das-image-baner-inner-div",children:(0,N.jsx)("img",{src:c?G:"".concat(e,"/files/").concat(G),alt:"Selected",className:"image-div-das-image-banner"})}),(0,N.jsx)(r.j55,{style:{cursor:"pointer",fontSize:"20px"},onClick:()=>{E(""),V(""),S(!0)}})]})]})]}),(0,N.jsxs)("div",{className:"d-flex flex-row align-items-end justify-content-end mt-3 w-100 gap-3",children:[(0,N.jsx)("button",{className:"das-button-end save-button",onClick:async()=>{const t=new FormData;t.append("companyName",te||""),t.append("companyDescription",ne||""),ie&&t.append("companyType",ie._id);const n=oe.map(e=>({_id:e.segment._id,label:e.segment.label,value:e.segment.value}));t.append("companySegment",JSON.stringify(n));const i=ge.map(e=>({_id:e.sub._id,main_category:e.main._id,value:e.sub.value,label:e.sub.label,icon:e.sub.icon,created_time:e.sub.created_time}));t.append("category",JSON.stringify(i)),t.append("country",fe&&fe.value||""),t.append("city",je&&je.value||""),t.append("street",Ne||""),t.append("zipcode",Se||""),t.append("taxpayerID",Ce||""),t.append("faxNumber",De||""),t.append("website",Fe||""),t.append("hscode",Pe||""),t.append("foundedYear",Le||""),t.append("employeeNumber",Te||""),t.append("keyword",JSON.stringify(We)),s&&(_?t.append("logo",_):t.append("logo","false")),c&&(T?t.append("banner",T):t.append("banner","false"));try{const s=await l.A.post("".concat(e,"/api/users/update-company-profile"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});A(s.data.msg,"success"),a("/dashboard/home"),console.log("submit response",s.data)}catch(r){const e=r.response.data;if(He({}),e){const a={};for(const s in e)e[s]&&(a[s]=e[s]);He(a)}console.error(r)}},children:"Save"}),(0,N.jsx)("button",{className:"das-button-end cancel-button",children:"Cancel"})]})]})]})})}}}]);
//# sourceMappingURL=4036.db0725f0.chunk.js.map